#!/usr/bin/env python3
"""Import configuration."""

from beancount_reds_importers import fidelity_csv
from beancount_reds_importers.fidelity_csv import combined

fund_data = [
        ('FZFXX',     'helllo', 'Fideilty Zero',          ),
        ('DNA',       'world', 'DNA Systems',             ),
        ('G8354H126', '',          'Great Stock',         ),
        ('FZIPX',     '',          'Fidelity Zero IPX',   ),
        ('9128285B2', '',          'Fidelity 9128285B2',  ),
        ('',          '',          'Unknown',             ),
        ('SPAXX', '',          'Fidelity SPA',  ),
]
money_market = [ 'VMMXX', 'SPAXX' ]
fund_info = {
        'fund_data' : fund_data,
        'money_market' : money_market,
        }

def invst(importer, account_number, acct, config={}):
    s = acct.split(':')
    root = s[1]
    taxability = s[2]
    leaf = ':'.join(s[3:])
    accts = {
        'account_number' : account_number,
        'main_account'   : acct + ':{ticker}',
        'cash_account'   : f'{acct}:{{currency}}',
        'transfer'       : 'Assets:Zero-Sum-Accounts:Transfers:Bank-Account',
        'dividends'      : f'Income:{root}:{taxability}:Dividends:{leaf}:{{ticker}}',
        'interest'       : f'Income:{root}:{taxability}:Interest:{leaf}',
        'cg'             : f'Income:{root}:{taxability}:Capital-Gains:{leaf}:{{ticker}}',
        'capgainsd_lt'   : f'Income:{root}:{taxability}:Capital-Gains-Distributions:Long:{leaf}:{{ticker}}',
        'capgainsd_st'   : f'Income:{root}:{taxability}:Capital-Gains-Distributions:Short:{leaf}:{{ticker}}',
        'fees'           : f'Expenses:Fees-and-Charges:Brokerage-Fees:{taxability}:{leaf}',
        'rounding_error' : 'Equity:Rounding-Errors:Imports',
        'fund_info'      : fund_info,
    }
    return importer.Importer({**accts, **config})

# Setting this variable provides a list of importer instances.
CONFIG = [
        invst(fidelity_csv, '456', 'Assets:Investments:Taxable:Fidelity'),

        # This is a checking account!
        # invst(fidelity_csv.combined, 'Fidelity X82000000', 'Assets:Banking:Fidelity-Checking'),
        invst(fidelity_csv.combined, 'Index Funds X83000000', 'Assets:Investments:Taxable:Fidelity-Index-Funds'),
        invst(fidelity_csv.combined, 'Value Picks Z2000000', 'Assets:Investments:Taxable:Fidelity-Value-Picks'),


]
